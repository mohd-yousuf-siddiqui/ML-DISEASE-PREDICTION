<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="650" viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title { font: bold 24px sans-serif; fill: #ffffff; }
    .subtitle { font: bold 16px sans-serif; fill: #ffffff; }
    .entity { font: 14px sans-serif; fill: #ffffff; }
    .arrow { stroke: #5F5; stroke-width: 2; marker-end: url(#arrowhead); }
    .data-label { font: 12px sans-serif; fill: #BBB; }
    .box { stroke: #666; stroke-width: 2; fill: #222; rx: 5; ry: 5; }
    .cluster { stroke: #444; stroke-width: 2; fill: #1a1a1a; rx: 10; ry: 10; }
    .database { stroke: #666; stroke-width: 2; fill: #222; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5F5" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="450" y="30" class="title" text-anchor="middle">Disease Prediction System - Data Flow Diagram</text>
  
  <!-- User Interface Cluster -->
  <rect x="50" y="60" width="800" height="120" class="cluster" />
  <text x="60" y="80" class="subtitle">User Interface Layer</text>

  <!-- Form Components -->
  <rect x="80" y="100" width="120" height="60" class="box" />
  <text x="140" y="135" class="entity" text-anchor="middle">Heart Disease Form</text>
  
  <rect x="230" y="100" width="120" height="60" class="box" />
  <text x="290" y="135" class="entity" text-anchor="middle">Diabetes Form</text>
  
  <rect x="380" y="100" width="120" height="60" class="box" />
  <text x="440" y="135" class="entity" text-anchor="middle">Pneumonia Form</text>
  
  <rect x="550" y="100" width="120" height="60" class="box" />
  <text x="610" y="135" class="entity" text-anchor="middle">Results Display</text>
  
  <rect x="700" y="100" width="120" height="60" class="box" />
  <text x="760" y="135" class="entity" text-anchor="middle">Error Messages</text>
  
  <!-- Application Logic Cluster -->
  <rect x="50" y="200" width="800" height="140" class="cluster" />
  <text x="60" y="220" class="subtitle">Flask Application Logic Layer</text>
  
  <!-- Route Components -->
  <rect x="80" y="240" width="120" height="60" class="box" />
  <text x="140" y="275" class="entity" text-anchor="middle">Heart Disease Route</text>
  
  <rect x="230" y="240" width="120" height="60" class="box" />
  <text x="290" y="275" class="entity" text-anchor="middle">Diabetes Route</text>
  
  <rect x="380" y="240" width="120" height="60" class="box" />
  <text x="440" y="275" class="entity" text-anchor="middle">Pneumonia Route</text>

  <rect x="550" y="240" width="120" height="60" class="box" />
  <text x="610" y="275" class="entity" text-anchor="middle">Results Route</text>
  
  <rect x="700" y="240" width="120" height="60" class="box" />
  <text x="760" y="275" class="entity" text-anchor="middle">Form Validation</text>
  
  <!-- Service Layer Cluster -->
  <rect x="50" y="360" width="800" height="120" class="cluster" />
  <text x="60" y="380" class="subtitle">Service Layer</text>
  
  <!-- Machine Learning Components -->
  <rect x="80" y="400" width="185" height="60" class="box" />
  <text x="172" y="435" class="entity" text-anchor="middle">Heart Disease Model</text>
  
  <rect x="332" y="400" width="185" height="60" class="box" />
  <text x="425" y="435" class="entity" text-anchor="middle">Diabetes Model</text>
  
  <rect x="585" y="400" width="185" height="60" class="box" />
  <text x="677" y="435" class="entity" text-anchor="middle">Pneumonia Model</text>
  
  <!-- Database Layer Cluster -->
  <rect x="50" y="500" width="800" height="120" class="cluster" />
  <text x="60" y="520" class="subtitle">Data Persistence Layer</text>
  
  <!-- Database -->
  <path d="M200,550 C200,530 450,530 450,550 L450,570 C450,590 200,590 200,570 Z" class="database" />
  <path d="M200,550 C200,570 450,570 450,550" stroke="#666" stroke-width="2" fill="none" />
  <text x="325" y="560" class="entity" text-anchor="middle">User and Prediction</text>
  <text x="325" y="580" class="entity" text-anchor="middle">Database</text>
  
  <!-- Session Storage -->
  <rect x="550" y="540" width="220" height="60" class="box" />
  <text x="660" y="575" class="entity" text-anchor="middle">Session Storage</text>
  
  <!-- Arrows: User Interface to Application Logic -->
  <line x1="140" y1="160" x2="140" y2="240" class="arrow" />
  <text x="150" y="200" class="data-label">User health data</text>
  
  <line x1="290" y1="160" x2="290" y2="240" class="arrow" />
  <text x="300" y="200" class="data-label">User health data</text>
  
  <line x1="440" y1="160" x2="440" y2="240" class="arrow" />
  <text x="450" y="200" class="data-label">User health data</text>
  
  <!-- Arrows: Application Logic to Service Layer -->
  <line x1="140" y1="300" x2="172" y2="400" class="arrow" />
  <text x="115" y="350" class="data-label">Cleaned features</text>
  
  <line x1="290" y1="300" x2="425" y2="400" class="arrow" />
  <text x="320" y="350" class="data-label">Cleaned features</text>
  
  <line x1="440" y1="300" x2="677" y2="400" class="arrow" />
  <text x="520" y="350" class="data-label">Cleaned features</text>
  
  <!-- Arrows: Service Layer to Database Layer -->
  <line x1="172" y1="460" x2="300" y2="550" class="arrow" />
  <text x="200" y="510" class="data-label">Prediction results</text>
  
  <line x1="425" y1="460" x2="350" y2="550" class="arrow" />
  <text x="355" y="510" class="data-label">Prediction results</text>
  
  <line x1="677" y1="460" x2="400" y2="550" class="arrow" />
  <text x="510" y="510" class="data-label">Prediction results</text>
  
  <!-- Arrows: Service Layer to Session Storage -->
  <line x1="265" y1="430" x2="550" y2="560" class="arrow" />
  <line x1="425" y1="460" x2="550" y2="560" class="arrow" />
  <line x1="585" y1="430" x2="550" y2="560" class="arrow" />
  <text x="525" y="500" class="data-label">Session data</text>
  
  <!-- Arrows: Database/Session to Results UI -->
  <line x1="770" y1="560" x2="670" y2="160" class="arrow" stroke-dasharray="5,3" />
  <line x1="450" y1="550" x2="610" y2="160" class="arrow" stroke-dasharray="5,3" />
  <text x="700" y="370" class="data-label">Results for display</text>
  
  <!-- Legend -->
  <rect x="700" y="610" width="150" height="30" class="box" />
  <text x="775" y="630" class="entity" text-anchor="middle">Data Flow</text>
  <line x1="640" y1="625" x2="680" y2="625" class="arrow" />
</svg>